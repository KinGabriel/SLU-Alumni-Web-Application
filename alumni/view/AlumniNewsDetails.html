<!-- News Details: Displays details about a news -->
<!-- Library Used: Bootstrap (https://getbootstrap.com/) -->
<!-- Design Inspiration: ThemeForest (https://themeforest.net/) -->
<!-- Group Member Responsible:  EscaÃ±o, Nichole Jhoy -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SLU Alumina</title>
    <link href="../../assets/css/AlumniNewsDetails.css" rel="stylesheet">
    <link href="../../node_modules/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
   <!-- Header separator -->
   <div class="header-separator"></div>

   <!-- Header -->
   <header>
    <h1>
        <img src="../../assets/images/logo.png" alt="SLU Alumina Logo" class="slu-logo">
        <!-- Search bar -->
        <div class="search">
            <form id="searchForm" onsubmit="return false;">
                <input type="text" name="search" id="searchInput" placeholder="Search..." onkeyup="searchUsers()">
                <button type="submit">
                    <img src="../../assets/images/search.png" alt="Search" class="search-icon">
                </button>
            </form>
        </div>
    </h1>
    
    <ul id="searchResults"></ul>
    
   </header>

    <!-- News Details -->
    <div class="container">
        <a href="/api/news" class="btn btn-outline-secondary back-btn">
            <img src="../../assets/images/news.png" alt="Back" class="me-2" style="width: 20px; height: 20px;"> News
        </a>    
        <div class="image-section">
            <img src="../../assets/images/navi.jpg" alt="SLU Intramural Opening">
        </div>        
        <div class="content-section">
            <h1></h1>
            <p>
              
            </p>
            <p>
               
            </p>
        </div>
    </div>

    <!-- Bootstrap JavaScript -->
    <script src="../../../node_modules/bootstrap/dist/js/bootstrap.bundle.min.js" defer></script>
    <script src="../assets/js/handleHomefeed.js" defer>  </script>  
    <script src="../assets/js/handleFetch.js" async>  </script> 
    <script src="../../assets/js/handleAlumniFetch.js" defer>  </script> 
    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                const urlParams = new URLSearchParams(window.location.search);
                const newsId = urlParams.get('news_id');

                if (!newsId) {
                    console.error('No news ID found in URL.');
                    return;
                }

                const response = await fetch(`/api/news/details/${newsId}`);
                const data = await response.json();

                if (data.status !== 'success') {
                    console.error('Failed to fetch news details:', data.message);
                    return;
                }

                const { title, photo, description } = data.news;

                document.querySelector('.image-section img').src = photo || '';
                document.querySelector('.content-section h1').textContent = title;
                document.querySelector('.content-section').querySelectorAll('p')[0].textContent = description;
            } catch (error) {
                console.error('Error fetching news details:', error);
            }
        });
    </script>
</body>
</html>
